
          window.__NEXT_REGISTER_PAGE('/auth/signin', function() {
            var comp = module.exports=webpackJsonp([9],{126:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(3),l=n(s),o=a(13),i=n(o),u=a(12),r=n(u),c=a(1),d=n(c),h=a(6),m=n(h),f=a(2),p=n(f),b=a(5),g=n(b),E=a(0),y=n(E),w=a(19),v=n(w),k=a(18),S=n(k),T=a(81),N=n(T),x=function(e){function t(e){(0,d.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.state={email:"",session:a.props.session},a.handleSubmit=a.handleSubmit.bind(a),a.handleEmailChange=a.handleEmailChange.bind(a),a}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){function e(){return t.apply(this,arguments)}var t=(0,r.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N.default,e.t0=this.state.email,e.next=4,t.getSession(!0);case 4:e.t1=e.sent,this.state={email:e.t0,session:e.t1};case 6:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getInitialProps",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,r.default)(i.default.mark(function e(t){var a,n=t.req;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new N.default({req:n}),e.next=3,a.getSession(!0);case 3:return e.t0=e.sent,e.abrupt("return",{session:e.t0});case 5:case"end":return e.stop()}},e,this)}));return e}()}]),(0,p.default)(t,[{key:"handleEmailChange",value:function(e){this.setState({email:e.target.value.trim(),session:this.state.session})}},{key:"handleSubmit",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,r.default)(i.default.mark(function e(t){var a,n=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=new N.default,a.signin(this.state.email).then(function(){n.props.url.push("/auth/check-email")}).catch(function(e){console.log(e)});case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){var e=y.default.createElement("div",null);if(this.state.session.user){var t=y.default.createElement("p",null,y.default.createElement("a",{className:"button button-oauth button-facebook",href:"/auth/oauth/facebook"},"Link with Facebook"));this.state.session.user.facebook&&(t=y.default.createElement("form",{action:"/auth/oauth/facebook/unlink",method:"post"},y.default.createElement("input",{name:"_csrf",type:"hidden",value:this.state.session.csrfToken}),y.default.createElement("button",{className:"button button-oauth",type:"submit"},"Unlink from Facebook")));var a=y.default.createElement("p",null,y.default.createElement("a",{className:"button button-oauth button-google",href:"/auth/oauth/google"},"Link with Google"));this.state.session.user.google&&(a=y.default.createElement("form",{action:"/auth/oauth/google/unlink",method:"post"},y.default.createElement("input",{name:"_csrf",type:"hidden",value:this.state.session.csrfToken}),y.default.createElement("button",{className:"button button-oauth",type:"submit"},"Unlink from Google")));var n=y.default.createElement("p",null,y.default.createElement("a",{className:"button button-oauth button-twitter",href:"/auth/oauth/twitter"},"Link with Twitter"));this.state.session.user.twitter&&(n=y.default.createElement("form",{action:"/auth/oauth/twitter/unlink",method:"post"},y.default.createElement("input",{name:"_csrf",type:"hidden",value:this.state.session.csrfToken}),y.default.createElement("button",{className:"button button-oauth",type:"submit"},"Unlink from Twitter"))),e=y.default.createElement("div",null,y.default.createElement("h3",null,"You are signed in"),y.default.createElement("p",null,"Name: ",y.default.createElement("strong",null,this.state.session.user.name)),y.default.createElement("p",null,"Email address: ",y.default.createElement("strong",null,this.state.session.user.email.match(/.*@localhost\.localdomain$/)?"N/A":this.state.session.user.email)),y.default.createElement("p",null,"Email verified: ",y.default.createElement("strong",null,this.state.session.user.verified?"Yes":"No")),y.default.createElement("p",null,"You can link your account to your other accounts so you can sign in with them too."),t,a,n,y.default.createElement("p",null,y.default.createElement("i",null,"Note: When signed in you should be able to change your name and email address and delete your account but those features aren't implemented in this example project. If you sign in with a service that doesn't provide  an email address (like Twitter) you will be assigned a placeholder email address (e.g. twitter-15403657@localhost.localdomain) until you supply a real one. Email addresses can be verified by signing in with them (the verified status should reset to false if the email address is changed).")))}else e=y.default.createElement("div",null,y.default.createElement("form",{id:"signin",method:"post",action:"/auth/email/signin",onSubmit:this.handleSubmit},y.default.createElement("input",{name:"_csrf",type:"hidden",value:this.state.session.csrfToken}),y.default.createElement("h3",null,"Sign in with email"),y.default.createElement("p",null,y.default.createElement("label",{htmlFor:"email"},"Email address"),y.default.createElement("br",null),y.default.createElement("input",{name:"email",type:"text",placeholder:"j.smith@example.com",id:"email",value:this.state.email,onChange:this.handleEmailChange})),y.default.createElement("p",null,y.default.createElement("button",{id:"submitButton",type:"submit"},"Sign in"))),y.default.createElement("h3",null,"Sign in with oAuth"),y.default.createElement("p",null,y.default.createElement("a",{className:"button button-oauth button-facebook",href:"/auth/oauth/facebook"},"Sign in with Facebook"),y.default.createElement("a",{className:"button button-oauth button-google",href:"/auth/oauth/google"},"Sign in with Google"),y.default.createElement("a",{className:"button button-oauth button-twitter",href:"/auth/oauth/twitter"},"Sign in with Twitter")));return y.default.createElement(S.default,{session:this.state.session},y.default.createElement("h2",null,"Authentication"),e,y.default.createElement("h3",null,"How it works"),y.default.createElement("p",null,"This project includes a passwordless, email based authentication system, that uses one time use tokens sent out via email. Recipients follow the links in the emails to sign in."),y.default.createElement("p",null,"This project also uses the popular authentication library Passport (along with express and express-sessions) to allow signing in with Facebook, Google, Twitter and other sites that support oAuth."),y.default.createElement("p",null,"Cross Site Request Forgery (CSRF) protection is added to all post requests, session data on the server is encrypted and the session tokens are stored HTTP Only cookies on the client as protection against Cross Site Scripting (XSS) attacks."),y.default.createElement("p",null,"Public data associated with your profile that the client needs to display, such as your name and email address is cached in localStorage if it is supported by the browser."),y.default.createElement("h3",null,"Extending the authentication system"),y.default.createElement("p",null,"By default, user data is persisted on the server in SQL Lite as this requires no configuration to get started, but this can be easily changed to another database - including MongoDB, MySQL, PostgreSQL, Amazon Redshift and others by setting the MONGODB_URI environment variable accordingly. It works great with database providers like ",y.default.createElement("a",{href:"https://mlab.com"},"mLab"),"."),y.default.createElement("p",null,"For larger sites, a fully decoupled authentication system, running on a seperate backend, can be easier to scale and maintain, but this example shows how you can add easily add authentication to any Next.js 2.0 project."),y.default.createElement("p",null,"To use the oAuth sign in options, you will need to create your own account with each provider and configure each one for your site. This can be a slightly cumbersome process that is hard to debug. See ",y.default.createElement("a",{href:"https://github.com/stackriot/nextjs-starter/blob/master/AUTHENTICATION.md"},"AUTHENTICATION.md")," for a step-by-step guide to configuring oAuth and check out ",y.default.createElement("a",{href:"https://github.com/stackriot/nextjs-starter/blob/master/routes/passport-strategies.js"},"passport-strategies.js")," if you want to add support for other oAuth providers (e.g. GitHub) using other Passport Strategies."),y.default.createElement("p",null,"If you aren't receiving emails when trying to sign in via email, try configuring the mail server option."),y.default.createElement("p",null,"See ",y.default.createElement("a",{href:"https://github.com/stackriot/nextjs-starter/blob/master/.env.default"},".env.default")," for all the options you can use in your .env file."))}}]),t}(v.default);t.default=x},264:function(e,t,a){e.exports=a(126)}},[264]);
            return { page: comp.default }
          })
        